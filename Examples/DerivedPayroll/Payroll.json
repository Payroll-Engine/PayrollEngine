{
  "$schema": "../../Schemas/PayrollEngine.Exchange.schema.json",
  "tenants": [
    {
      "identifier": "DerivedPayroll",
      "created": "2019-01-01T00:00:00.0Z",
      "users": [
        {
          "identifier": "peter.schmid@foo.com",
          "firstName": "Peter",
          "culture": "it-IT",
          "lastName": "Schmid",
          "userType": "Supervisor",
          "created": "2019-01-01T00:00:00.0Z",
          "attributes": {
            "StartupPayroll" : "DerivedPayroll.Derived",
            "StartupEmployee": "višnja.müller@foo.com",
            "StartupPage": "regulation"
          }
        }
      ],
      "divisions": [
        {
          "name": "DerivedDivision",
          "culture": "de-CH",
          "created": "2019-01-01T00:00:00.0Z"
        }
      ],
      "employees": [
        {
          "identifier": "višnja.müller@foo.com",
          "firstName": "Višnja",
          "lastName": "Müller",
          "divisions": [
            "DerivedDivision"
          ],
          "created": "2019-01-01T00:00:00.0Z"
        }
      ],
      "regulations": [
        {
          "name": "DerivedPayrollRoot",
          "description": "The root root payroll",
          "created": "2019-01-01T00:00:00.0Z",
          "cases": [
            {
              "name": "AHV",
              "caseType": "National",
              "created": "2019-01-01T00:00:00.0Z",
              "fields": [
                {
                  "name": "AHV",
                  "valueType": "Decimal",
                  "timeType": "CalendarPeriod",
                  "created": "2019-01-01T00:00:00.0Z"
                }
              ]
            },
            {
              "name": "Monatsfaktor",
              "caseType": "Company",
              "created": "2019-01-01T00:00:00.0Z",
              "fields": [
                {
                  "name": "Monatsfaktor",
                  "valueType": "Decimal",
                  "timeType": "CalendarPeriod",
                  "created": "2019-01-01T00:00:00.0Z"
                }
              ]
            },
            {
              "name": "Monatslohn",
              "nameLocalizations": {
                "en": "Monatslohn Root"
              },
              "description": "Monatslohn Root",
              "caseType": "Employee",
              "created": "2019-01-01T00:00:00.0Z",
              "lookups": [
                "a",
                "b",
                "c"
              ],
              "fields": [
                {
                  "name": "Monatslohn",
                  "nameLocalizations": {
                    "en": "Monatslohn Root"
                  },
                  "valueType": "Money",
                  "timeType": "CalendarPeriod",
                  "attributes": {
                    "BaseAttribute1": "MyValue1",
                    "BaseAttribute2": "MyValue2"
                  },
                  "created": "2019-01-01T00:00:00.0Z"
                }
              ]
            },
            {
              "name": "Kaderstufe",
              "caseType": "Employee",
              "created": "2019-01-01T00:00:00.0Z",
              "fields": [
                {
                  "name": "Kaderstufe",
                  "valueType": "Integer",
                  "timeType": "Period",
                  "created": "2019-01-01T00:00:00.0Z"
                }
              ]
            },
            {
              "name": "Grundeinkommen",
              "caseType": "Employee",
              "created": "2019-01-01T00:00:00.0Z",
              "fields": [
                {
                  "name": "Grundeinkommen",
                  "valueType": "Money",
                  "timeType": "CalendarPeriod",
                  "created": "2019-01-01T00:00:00.0Z"
                }
              ]
            }
          ],
          "caseRelations": [
            {
              "sourceCaseName": "Monatslohn",
              "targetCaseName": "Kaderstufe",
              "created": "2019-01-01T00:00:00.0Z"
            },
            {
              "sourceCaseName": "Monatslohn",
              "targetCaseName": "Grundeinkommen",
              "buildExpression": " var value = (decimal?)SourceValue[\"Monatslohn\"]; TargetValue[\"Grundeinkommen\"] = value.HasValue ? value.Value * 0.125M : 0; TargetStart[\"Grundeinkommen\"] = SourceStart[\"Monatslohn\"]?.AddMonths(3); TargetEnd[\"Grundeinkommen\"] = SourceEnd[\"Monatslohn\"]?.AddMonths(3)",
              "created": "2019-01-01T00:00:00.0Z"
            }
          ],
          "wageTypes": [
            {
              "wageTypeNumber": 101,
              "name": "Monatslohn 1",
              "valueExpression": "CaseValue[\"Monatslohn\"]",
              "created": "2019-01-01T00:00:00.0Z"
            },
            {
              "wageTypeNumber": 102,
              "name": "Monatslohn 2",
              "valueExpression": "CaseValue[\"Monatslohn\"]",
              "resultExpression": "Attribute[\"Name\"] = \"Test\"; Attribute[\"Value\"] = 100",
              "created": "2019-01-01T00:00:00.0Z"
            },
            {
              "wageTypeNumber": 103,
              "name": "Monatslohn 3",
              "valueExpression": "/* #sealed */ return (decimal)CaseValue[\"Monatslohn\"];",
              "created": "2019-01-01T00:00:00.0Z"
            }
          ]
        },
        {
          "name": "DerivedPayroll",
          "parentPayrollName": "DerivedPayrollRoot",
          "description": "The derived payroll",
          "created": "2019-01-01T00:00:00.0Z",
          "baseRegulations": [
            "DerivedPayrollRoot"
          ],
          "cases": [
            {
              "name": "Monatslohn",
              "nameLocalizations": {
                "en": "Monatslohn Derived",
                "it": "Monatslohn Derivato"
              },
              "description": "Monatslohn Derived",
              "caseType": "Employee",
              "created": "2019-01-01T00:00:00.0Z",
              "fields": [
                {
                  "name": "Monatslohn",
                  "nameLocalizations": {
                    "en": "Monatslohn Derived",
                    "it": "Monatslohn Derivato"
                  },
                  "valueType": "Money",
                  "timeType": "CalendarPeriod",
                  "attributes": {
                    "DerivedAttribute1": "MyDerivedValue1",
                    "DerivedAttribute2": "MyDerivedValue2",
                    "BaseAttribute2": "MyOverideValue"
                  },
                  "created": "2019-01-01T00:00:00.0Z"
                }
              ]
            },
            {
              "name": "Monatslohn Zusatz",
              "caseType": "Employee",
              "created": "2019-01-01T00:00:00.0Z",
              "fields": [
                {
                  "name": "Monatslohn Zusatz",
                  "valueType": "Decimal",
                  "timeType": "CalendarPeriod",
                  "created": "2019-01-01T00:00:00.0Z"
                }
              ]
            }
          ],
          "wageTypes": [
            {
              "wageTypeNumber": 102,
              "name": "Monatslohn 2",
              "valueExpression": "null",
              "created": "2019-01-01T00:00:00.0Z"
            },
            {
              "wageTypeNumber": 104,
              "name": "Kaderlohn 1",
              "valueExpression": "null",
              "created": "2019-01-01T00:00:00.0Z"
            }
          ]
        },        
        {
          "name": "DerivedPayrollLeave",
          "parentPayrollName": "DerivedPayroll",
          "description": "The derived payroll leave",
          "created": "2019-01-01T00:00:00.0Z",
          "baseRegulations": [
            "DerivedPayroll"
          ],
          "cases": [
            {
              "name": "Monatslohn",
              "nameLocalizations": {
                "en": "Monatslohn Leave",
                "it": "Monatslohn Levato"
              },
              "description": "Monatslohn Leave",
              "caseType": "Employee",
              "created": "2019-01-01T00:00:00.0Z",
              "fields": [
                {
                  "name": "Monatslohn",
                  "nameLocalizations": {
                    "en": "Monatslohn Leave",
                    "it": "Monatslohn Derivato"
                  },
                  "valueType": "Money",
                  "timeType": "CalendarPeriod",
                  "attributes": {
                    "DerivedAttribute1": "MyDerivedValue3",
                    "DerivedAttribute2": "MyDerivedValue4",
                    "BaseAttribute2": "MyOverideValue"
                  },
                  "created": "2019-01-01T00:00:00.0Z"
                },
                {
                  "name": "Monatslohn Spez",
                  "valueType": "Money",
                  "timeType": "CalendarPeriod",
                  "optional": true,
                  "created": "2019-01-01T00:00:00.0Z"
                }
              ]
            },
            {
              "name": "AHV Zusatz",
              "caseType": "Employee",
              "created": "2019-01-01T00:00:00.0Z",
              "availableExpression": "CaseValue[\"AHV\"].HasValue",
              "fields": [
                {
                  "name": "AHV Zusatz",
                  "valueType": "Decimal",
                  "timeType": "CalendarPeriod",
                  "created": "2019-01-01T00:00:00.0Z"
                }
              ]
            },
            {
              "name": "Kaderstufe",
              "caseType": "Employee",
              "created": "2019-01-01T00:00:00.0Z",
              "fields": [
                {
                  "name": "Kaderlohn",
                  "valueType": "Money",
                  "timeType": "CalendarPeriod",
                  "availableExpression": "(int)CaseValue[\"Kaderstufe\"] > 0;",
                  "created": "2019-01-01T00:00:00.0Z"
                }
              ]
            },
            {
              "name": "Kaderstufe & Grundeinkommen",
              "caseType": "Employee",
              "created": "2019-01-01T00:00:00.0Z",
              "baseCaseFields": [
                {
                  "name": "Kaderstufe",
                  "order": 2
                },
                {
                  "name": "Grundeinkommen",
                  "order": 1
                }
              ]
            }
          ],
          "caseRelations": [
            {
              "sourceCaseName": "Monatslohn Spez",
              "targetCaseName": "Monatslohn",
              "created": "2019-01-01T00:00:00.0Z"
            }
          ],
          "collectors": [
            {
              "name": "AHV Basis",
              "endExpression": "ResultAttribute[\"Canton\"] = \"AG\"; ResultAttribute[\"Tari\"] = \"A0N\"; AddCustomResult(CollectorName, 2200, CycleStart, PeriodEnd); ; SetResultTags(new[] { \"MyColKey\" });"
            },
            {
              "name": "Credit"
            },
            {
              "name": "Debit"
            }
          ],
          "wageTypes": [
            {
              "wageTypeNumber": 102,
              "name": "Monatslohn 2",
              "valueExpression": "(decimal)CaseValue[\"Monatslohn\"] * 2",
              "resultExpression": "Attribute[\"MyName\"] = \"MyTest\"; Attribute[\"Value\"] = 22;",
              "created": "2019-01-01T00:00:00.0Z"
            },
            {
              "wageTypeNumber": 103,
              "name": "Monatslohn 3",
              "overrideType": "Inactive",
              "created": "2019-01-01T00:00:00.0Z"
            },
            {
              "wageTypeNumber": 104,
              "name": "Kaderlohn 1",
              "valueExpression": "(int)CaseValue[\"Kaderstufe\"] > 0 ? CaseValue[\"Kaderlohn\"] : null",
              "created": "2019-01-01T00:00:00.0Z"
            }
          ],
          "scripts": [
            {
              "name": "TestScript",
              "value": "public class Foo {}"
            }
          ]
        }
      ],
      "payrolls": [
        {
          "name": "DerivedPayroll.Derived",
          "divisionName": "DerivedDivision",
          "layers": [
            {
              "level": 1,
              "priority": 1,
              "regulationName": "DerivedPayrollRoot"
            },
            {
              "level": 2,
              "priority": 1,
              "regulationName": "DerivedPayroll"
            },
            {
              "level": 3,
              "priority": 1,
              "regulationName": "DerivedPayrollLeave"
            }
          ]
        }
      ],
      "payruns": [
        {
          "payrollName": "DerivedPayroll.Derived",
          "name": "DerivedPayrollPayrun1"
        }
      ]
    }
  ]
}